--------------------------------------------------------------------------------
--
-- init.lua - nvim 初始化配置加载
--
-- 遵循 vim8 和 nvim-0.8 目录结构规范
--
-- Maintainer: cuitggyy (at) google.com
-- Last Modified: 2025/03/23 05:05:39
--
--------------------------------------------------------------------------------


--=====================================================================
--=================== READ THIS BEFORE CONTINUING =====================
--=====================================================================
--========                                    .-----.          ========
--========         .----------------------.   | === |          ========
--========         |.-""""""""""""""""""-.|   |-----|          ========
--========         ||                    ||   | === |          ========
--========         ||  Coding By NeoVIM  ||   |-----|          ========
--========         ||                    ||   | === |          ========
--========         ||                    ||   |-----|          ========
--========         ||:Joney              ||   |:::::|          ========
--========         |'-..................-'|   |____o|          ========
--========         `"")----------------(""`   ___________      ========
--========        /::::::::::|  |::::::::::\  \ no mouse \     ========
--========       /:::========|  |==hjkl==:::\  \ required \    ========
--========      '""""""""""""'  '""""""""""""'  '""""""""""'   ========
--========                                                     ========
--=====================================================================
--=====================================================================


-- 防止重复加载
if _G.loaded then
	return
end
_G.loaded = true

-- 设定配置文件工作目录路径
local nvim = vim.fn.stdpath('config')

-- 将配置文件默认目录加入 runtimepath
vim.opt.runtimepath:prepend(nvim)

-- 定义一个函数, 加载指定根路径lua文件
local function LoadLua(module)
	if string.find(module, '%.lua$') or string.find(module, '[/\\]')then
		local path = vim.fs.joinpath(nvim, module)
		dofile(path)
	else
		package.path = nvim .. '/?.lua;' .. package.path
		require(module)
	end
end


------------------------------------------------------------------------
-- 加载 lua 脚本
------------------------------------------------------------------------

-- 插件管理
LoadLua('deps')

-- 插件配置
LoadLua('tweak')

-- 基本选项
LoadLua('setopt')

-- 扩展功能
LoadLua('autofn')

-- 按键映射
LoadLua('keymap')


